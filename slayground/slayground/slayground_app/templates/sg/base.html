{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Slayground{% endblock %}</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'slayground_app/styles.css' %}" />
    {% block head %}{% endblock %}
  </head>

  <body>
    {% with url_name=request.resolver_match.url_name %}
    <nav
      class="navbar navbar-expand-lg navbar-dark border-bottom border-secondary"
    >
      <div class="container">
        <a class="navbar-brand fw-bold" href="{% url 'sg:home' %}"
          >Slayground</a
        >

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#nav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div id="nav" class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'about' %}active{% endif %}"
                href="{% url 'sg:about' %}"
                >About</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'class_list' or url_name == 'class_detail' or url_name == 'book_session' %}active{% endif %}"
                href="{% url 'sg:class_list' %}"
                >Classes</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'content_hub' %}active{% endif %}"
                href="{% url 'sg:content_hub' %}"
                >Content</a
              >
            </li>
            <!-- <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'calendar' %}active{% endif %}"
                href="{% url 'sg:calendar' %}"
                >Calendar</a
              >
            </li> -->
            <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'slayvents' %}active{% endif %}"
                href="{% url 'sg:slayvents' %}"
                >SLAYvents</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'slaybrations_list' or url_name == 'slaybrations_detail' or url_name == 'slaybrations_register' %}active{% endif %}"
                href="{% url 'sg:slaybrations_list' %}"
                >SLAYbrations</a
              >
            </li>
          </ul>

          <ul class="navbar-nav">
            {% if user.is_authenticated %} {% if user.is_staff %}
            <li class="nav-item">
              <a class="nav-link" href="/admin/">Admin</a>
            </li>
            {% endif %}
            <li class="nav-item">
              <span class="nav-link disabled"
                >Hi, {{ user.first_name|default:user.username }}</span
              >
            </li>
            <li class="nav-item">
              <!-- Logout must be POST in Django 5+ -->
              <form
                method="post"
                action="{% url 'sg:logout' %}?next={{ request.path }}"
                class="d-inline"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  class="nav-link btn btn-link p-0 align-baseline"
                >
                  Logout
                </button>
              </form>
            </li>
            {% else %}
            <li class="nav-item">
              <a
                class="nav-link {% if url_name == 'login' %}active{% endif %}"
                href="{% url 'sg:login' %}?next={{ request.path }}"
                >Login</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'admin:login' %}">Staff</a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>
    {% endwith %}

    <main class="container my-4">
      {% include "sg/_messages.html" %} {% block content %}{% endblock %}
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    {% block scripts %}{% endblock %}
  </body>
</html>
